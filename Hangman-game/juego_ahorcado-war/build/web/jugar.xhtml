<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Ahorcado</title>
    </h:head>
    <h:body>
        <center>
            <f:view>
                <h2>Torres Velasco Alvaro Eduardo</h2>

                <h:form>
                    <h3><h:outputText value="${ahorcado.adivina}"/></h3>

                    <!-- Mostrar la Palabra seleccionada y las Letras a adivinar -->
                    <c:forEach var="letra" items="${ahorcado.letras}" >
                        <h:commandLink value="${letra}" actionListener="${ahorcado.actualiza}"></h:commandLink>
                    </c:forEach>
                </h:form>
                <h:outputLabel> "${ahorcado.idLetra}" </h:outputLabel>
                <h4>Intentos Restantes:</h4>
                <h3><h:outputText value="${ahorcado.intentos}"/></h3>
                
                <c:choose>
                    <c:when test="${ahorcado.palabra == ''}">
                        #{ahorcado.actualizaJuegosU()}
                        <h3>Adivinaste la palabra</h3>
                        
                        <h:form> 
                            <br/>
                            <h1><h:outputText value="List"/></h1>
                            <h:dataTable value="#{ahorcado.list_ju()}" var="item">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Idjuegousu"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idjuegousu}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Idusuario"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idusuario.idusuario}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Palabra"/>
                                    </f:facet>
                                    <h:outputText value="#{item.palabra.idpalabra}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Intentosr"/>
                                    </f:facet>
                                    <h:outputText value="#{item.intentosr}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Intentost"/>
                                    </f:facet>
                                    <h:outputText value="#{item.intentost}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="FechaHora"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaHora}">
                                        <f:convertDateTime pattern="MM/dd/yyyy" />
                                    </h:outputText>
                                </h:column>
                                
                            </h:dataTable>
                        </h:form>
                        
                        <h:form>
                            <br/>
                            <h:commandButton value="Nuevo Juego" action="configurar.xhtml" actionListener="#{ahorcado.reiniciar()}"></h:commandButton>
                            <br/><br/>
                            <h:commandButton value="Menu" action="index.xhtml" actionListener="#{ahorcado.reiniciar()}"></h:commandButton>
                        </h:form>
                        <br />
                    </c:when>  
                    
                    <c:when test="${ahorcado.intentos == 0}">
                        #{ahorcado.actualizaJuegosU()}
                        <h3>Se te acabaron los intentos</h3>
                        <br/>
                        <h3>La palabra era:</h3>
                        <h3><h:outputText value="${ahorcado.respuesta}"/></h3>
                        
                        <h:form>
                            <h1><h:outputText value="List"/></h1>
                            <h:dataTable value="#{ahorcado.list_ju()}" var="item">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Idjuegousu"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idjuegousu}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Idusuario"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idusuario.idusuario}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Palabra"/>
                                    </f:facet>
                                    <h:outputText value="#{item.palabra.idpalabra}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Intentosr"/>
                                    </f:facet>
                                    <h:outputText value="#{item.intentosr}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Intentost"/>
                                    </f:facet>
                                    <h:outputText value="#{item.intentost}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="FechaHora"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaHora}">
                                        <f:convertDateTime pattern="MM/dd/yyyy" />
                                    </h:outputText>
                                </h:column>
                                
                            </h:dataTable>
                        </h:form>

                        <h:form>
                            <br/>
                            <h:commandButton value="Nuevo Juego" action="configurar.xhtml" actionListener="#{ahorcado.reiniciar()}"></h:commandButton>
                            <br/><br/>
                            <h:commandButton value="Cerrar Sesion" action="index.xhtml" actionListener="#{ahorcado.reiniciar()}"></h:commandButton>
                        </h:form>
                        <br />
                    </c:when>
                </c:choose>
                
            </f:view>
        </center>
    </h:body>
</html>
